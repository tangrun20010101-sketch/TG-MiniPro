# 产品方案

## 📱 产品概述

### 产品定位
一款基于Telegram的春节主题消除类小游戏，类似《羊了个羊》，结合轻度赌博机制和NFT奖励系统。

### 目标用户
- Telegram用户
- 喜欢消除类游戏的玩家
- 对NFT和区块链感兴趣的用户
- 喜欢社交游戏的用户

### 核心价值
1. **娱乐性**：简单有趣的消除游戏
2. **挑战性**：150秒限时挑战
3. **奖励性**：积分、金币、卡牌通兑体系
4. **社交性**：排名系统

---

## 🎮 功能模块

### 一、游戏核心模块

#### 1.1 游戏主界面

**布局设计：**
```
┌─────────────────────────────┐
│  [时间:150s] [分数:0] [道具] │ ← 顶部栏
├─────────────────────────────┤
│                             │
│        游戏区域             │
│    (多层叠放的福牌)         │
│                             │
│                             │
├─────────────────────────────┤
│ 托盘: [][][][][][][]        │ ← 底部托盘
└─────────────────────────────┘
```

**交互设计：**
- 点击牌：牌移动到托盘，有滑动动画
- 悬停牌：牌有缩放效果（桌面端）
- 不可点击：显示红色边框提示
- 消除牌：3张相同牌闪烁后消失，有粒子效果

**视觉设计：**
- 主题色：红色、金色（春节主题）
- 卡片样式：圆角矩形，有阴影
- 动画：流畅的CSS动画
- 音效：点击音、消除音（可选）

---

#### 1.2 游戏开始界面

**功能：**
- 模式选择（免费模式/小赌模式）
- 显示当前道具数量
- 显示历史最佳成绩
- 开始游戏按钮

**UI元素：**
- 模式选择卡片（大按钮）
- 道具显示区域
- 统计信息（总游戏次数、通关次数等）
- 开始按钮

---

#### 1.3 游戏结算界面

**通关结算：**
- 庆祝动画（烟花效果）
- 显示获得的奖励（积分等）
- 分享按钮
- 再来一局按钮

**失败结算：**
- 失败提示
- 「花 5 金币复活」按钮
- 重试按钮

**时间到结算：**
- 显示已消除的牌数
- 显示获得的奖励
- 重试按钮

---

### 二、道具系统模块

#### 2.1 道具显示

**位置：** 顶部栏右侧

**显示内容：**
- 撤回：显示剩余次数
- 洗牌：显示剩余次数
- 移除：显示剩余次数

**交互：**
- 点击道具按钮：使用道具
- 道具不足：显示购买提示

---

#### 2.2 道具商店

**功能：**
- 显示道具价格
- 购买道具按钮
- 显示每日免费道具重置时间

**道具价格：** 使用金币购买（见经济系统）

---

#### 2.3 卡槽扩展

**功能：**
- 显示当前卡槽数量（初始 7 个）
- 显示扩展价格：20 金币 = 永久 +1 槽位
- 购买扩展按钮
- UI 文案：「多一个槽，通关率+30%」

---

### 三、模式系统模块

#### 3.1 免费模式

**特点：**
- 不消耗代币
- 奖励较少
- 适合新手练习

**奖励：**
- 通关：获得福签（基础数量）
- 失败：无奖励或少量安慰奖

---

#### 3.2 小赌模式

**特点：**
- 消耗少量金币
- 奖励更多积分
- 失败可花 5 金币复活

---

### 四、卡牌与抽奖系统

#### 4.1 卡牌品质

| 品质 | 爆率 | 通兑 |
|------|------|------|
| 普通卡 | 98.99%（8 档均分） | 10 张 → 1 麒麟卡 |
| 麒麟卡 | 1% | 1:1 金币 |
| 财神卡 | 0.01% | 1:1 USDC |

#### 4.2 抽奖

- **消耗**：10 金币/次，90 金币/十连（送 1 次）
- **交互**：转盘固定，中心按钮 + 按钮外圈指针。用户按住按钮，松手后服务端返回角度，指针按按下时长旋转（按得越久转得越久，仅影响动画）
- **概率**：10 档位（36° 等分），麒麟 36° 1%、财神 324° 0.01%、普通 8 档均分

> 完整规格见 [LOTTERY_DESIGN.md](./LOTTERY_DESIGN.md)

#### 4.3 卡牌效果

**麒麟卡：** 「开局随机消一组」「多一个槽位（本局）」

**财神卡：** 「本局自动帮你摆放 3 张卡」+ 可兑换 1 USDC

---

### 五、排名系统模块

#### 5.1 排名页面

**显示内容：**
- 排名周期（如：2026-02-09 至 2026-02-11）
- 排名列表（前100名）
- 我的排名
- 排名奖励说明

**排名依据：**
- 总得分
- 通关次数
- 平均通关时间

---

#### 5.2 排名奖励

**奖励规则：** 可结合金币、麒麟卡等（具体见 [ECONOMY_SYSTEM.md](./ECONOMY_SYSTEM.md)）

---

### 六、支付系统模块

#### 6.1 钱包连接

**功能：**
- 连接TON钱包
- 显示钱包地址
- 显示余额

**UI：**
- 连接钱包按钮
- 钱包地址显示
- 余额显示

---

#### 6.2 充值页面

**功能：**
- 选择充值金额（USDC）
- 发起支付
- 支付状态显示

**兑换规则：** 1 USDC = 10 金币，充 10 USDC 送 10 金币

**UI 文案示例：** 「充 10U 得 100 金币 + 送 10 金币」

---

#### 6.3 支付流程

1. 用户选择充值金额（USDC）
2. 点击支付按钮
3. 弹出 TON 钱包确认
4. 用户确认支付
5. 等待支付确认
6. 支付成功后到账金币（含赠送）

---

### 七、红包系统模块

#### 7.1 发送红包

**功能：**
- 输入红包金额
- 选择接收人（Telegram用户）
- 发送红包
- 生成红包链接

**UI：**
- 金额输入框
- 接收人选择
- 发送按钮
- 红包链接显示

---

#### 7.2 打开红包

**功能：**
- 显示红包发送人
- 显示红包金额
- 点击打开按钮
- 显示获得的金额（概率）

**概率：**
- 90%：55%概率
- 100%：42.5%概率
- 150%：2.5%概率

---

#### 7.3 红包记录

**功能：**
- 发送的红包记录
- 收到的红包记录
- 红包状态（已打开/未打开）

---

### 八、用户中心模块

#### 8.1 个人信息

**显示内容：**
- 头像（Telegram头像）
- 用户名
- 钱包地址
- 注册时间

---

#### 8.2 游戏统计

**显示内容：**
- 总游戏次数
- 通关次数
- 通关率
- 最高分数
- 平均分数
- 总获得福签
- 总获得代币

---

#### 8.3 NFT收藏

**显示内容：**
- NFT列表
- NFT数量统计
- NFT详情

---

#### 8.4 设置

**功能：**
- 音效开关
- 震动开关
- 语言设置
- 关于页面

---

## 🎨 UI/UX设计规范

### 色彩方案

**主色调：**
- 红色：#FF4444（春节主题）
- 金色：#FFD700（财富主题）
- 背景色：#FFF5E6（浅黄色）

**辅助色：**
- 成功：#4CAF50
- 警告：#FF9800
- 错误：#F44336
- 信息：#2196F3

---

### 字体规范

**中文：**
- 标题：PingFang SC / 微软雅黑，24-32px
- 正文：PingFang SC / 微软雅黑，14-16px
- 按钮：PingFang SC / 微软雅黑，16-18px

**英文：**
- 标题：Roboto，24-32px
- 正文：Roboto，14-16px

---

### 间距规范

- 小间距：8px
- 中间距：16px
- 大间距：24px
- 超大间距：32px

---

### 按钮规范

**主要按钮：**
- 背景色：红色/金色
- 文字颜色：白色
- 圆角：8px
- 内边距：12px 24px

**次要按钮：**
- 背景色：透明
- 边框：1px solid 主色
- 文字颜色：主色
- 圆角：8px

---

### 卡片规范

- 背景色：白色
- 圆角：12px
- 阴影：0 2px 8px rgba(0,0,0,0.1)
- 内边距：16px

---

### 动画规范

**过渡时间：**
- 快速：0.2s
- 正常：0.3s
- 慢速：0.5s

**缓动函数：**
- ease-out（用于进入）
- ease-in（用于退出）
- cubic-bezier(0.17, 0.67, 0.12, 0.99)（用于特殊动画）

---

## 📱 响应式设计

### 移动端（主要）

**屏幕尺寸：**
- 最小宽度：320px
- 最大宽度：480px

**布局：**
- 单列布局
- 触摸友好的按钮大小（最小44x44px）
- 适配Telegram内嵌浏览器

---

### 桌面端（次要）

**屏幕尺寸：**
- 最小宽度：1024px

**布局：**
- 居中布局
- 最大宽度：1200px
- 鼠标悬停效果

---

## 🎯 用户体验流程

### 新用户流程

1. 打开Telegram Bot
2. 点击"开始游戏"
3. 自动登录（Telegram账号）
4. 选择模式（推荐免费模式）
5. 查看教程（可选）
6. 开始游戏
7. 游戏结束后查看奖励
8. 引导绑定钱包（可选）

---

### 老用户流程

1. 打开Telegram Bot
2. 自动登录
3. 查看统计信息
4. 选择模式
5. 开始游戏
6. 游戏结束后查看奖励
7. 查看排名（可选）
8. 发送红包（可选）

---

### 充值流程

1. 点击充值按钮
2. 选择充值选项
3. 连接钱包（如果未连接）
4. 确认支付
5. 等待支付确认
6. 支付成功后更新道具/卡槽
7. 显示成功提示

---

## 🔔 通知系统

### 游戏内通知

- 道具不足提示
- 支付成功提示
- 排名更新通知
- NFT获得通知

---

### Telegram通知

- 每日道具重置通知
- 排名奖励通知
- 红包收到通知
- 活动通知

---

## 📊 数据统计

### 需要统计的数据

1. **用户数据**
   - 注册用户数
   - 活跃用户数
   - 留存率

2. **游戏数据**
   - 总游戏次数
   - 通关率
   - 平均游戏时长
   - 平均分数

3. **经济数据**
   - 总充值金额
   - 总发放奖励
   - NFT发放数量
   - 红包发送数量

4. **功能数据**
   - 道具使用次数
   - 支付成功率
   - 各功能使用率

---

## 🚀 未来功能规划

### 第二阶段功能

1. **社交功能**
   - 好友系统
   - 好友对战
   - 分享功能

2. **活动系统**
   - 每日任务
   - 限时活动
   - 节日活动

3. **成就系统**
   - 成就列表
   - 成就奖励
   - 成就展示

---

### 第三阶段功能

1. **NFT交易**
   - NFT市场
   - NFT交易
   - NFT合成

2. **赛季系统**
   - 赛季排名
   - 赛季奖励
   - 赛季重置

3. **更多游戏模式**
   - 无尽模式
   - 挑战模式
   - 合作模式

---

## ✅ 产品验收标准

### 功能验收

- [ ] 所有核心功能正常
- [ ] 所有UI界面正确显示
- [ ] 所有交互流畅
- [ ] 所有API正常
- [ ] 支付流程完整
- [ ] NFT系统正常

---

### 性能验收

- [ ] 页面加载时间 < 2秒
- [ ] 动画流畅（60fps）
- [ ] API响应时间 < 500ms
- [ ] 无明显卡顿

---

### 用户体验验收

- [ ] 界面美观
- [ ] 交互直观
- [ ] 提示清晰
- [ ] 错误处理完善
- [ ] 响应式设计良好

---

## 📝 产品文档

### 用户手册

- 游戏规则说明
- 功能使用指南
- 常见问题解答

### 运营文档

- 活动策划方案
- 用户运营策略
- 数据分析报告
